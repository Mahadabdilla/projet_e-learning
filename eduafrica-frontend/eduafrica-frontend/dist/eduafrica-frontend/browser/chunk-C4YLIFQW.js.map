{
  "version": 3,
  "sources": ["src/app/core/services/auth.service.ts", "src/app/shared/models/user.model.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject, Observable, tap } from 'rxjs';\nimport { AuthResponse, LoginRequest, RegisterRequest, User } from '../../shared/models/user.model';\nimport { Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  private apiUrl = 'http://localhost:8080/api/auth';\n  private currentUserSubject = new BehaviorSubject<AuthResponse | null>(null);\n  public currentUser$ = this.currentUserSubject.asObservable();\n\n  constructor(\n    private http: HttpClient,\n    private router: Router\n  ) {\n    // Charger l'utilisateur depuis localStorage au d√©marrage\n    const storedUser = localStorage.getItem('currentUser');\n    if (storedUser) {\n      this.currentUserSubject.next(JSON.parse(storedUser));\n    }\n  }\n\n  register(request: RegisterRequest): Observable<AuthResponse> {\n    return this.http.post<AuthResponse>(`${this.apiUrl}/register`, request)\n      .pipe(\n        tap(response => {\n          this.setCurrentUser(response);\n        })\n      );\n  }\n\n  login(request: LoginRequest): Observable<AuthResponse> {\n    return this.http.post<AuthResponse>(`${this.apiUrl}/login`, request)\n      .pipe(\n        tap(response => {\n          this.setCurrentUser(response);\n        })\n      );\n  }\n\n  logout(): void {\n    localStorage.removeItem('currentUser');\n    localStorage.removeItem('token');\n    this.currentUserSubject.next(null);\n    this.router.navigate(['/login']);\n  }\n\n  private setCurrentUser(user: AuthResponse): void {\n    localStorage.setItem('currentUser', JSON.stringify(user));\n    localStorage.setItem('token', user.token);\n    this.currentUserSubject.next(user);\n  }\n\n  getCurrentUser(): AuthResponse | null {\n    return this.currentUserSubject.value;\n  }\n\n  getToken(): string | null {\n    return localStorage.getItem('token');\n  }\n\n  isAuthenticated(): boolean {\n    return !!this.getToken();\n  }\n\n  hasRole(role: string): boolean {\n    const user = this.getCurrentUser();\n    return user?.role === role;\n  }\n\n  getMe(): Observable<User> {\n    return this.http.get<User>(`${this.apiUrl}/me`);\n  }\n}\n", "export enum Role {\n  APPRENANT = 'APPRENANT',\n  FORMATEUR = 'FORMATEUR',\n  MENTOR = 'MENTOR',\n  ADMIN = 'ADMIN'\n}\n\nexport interface User {\n  id: number;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  country: string;\n  role: Role;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\nexport interface RegisterRequest {\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  country: string;\n  password: string;\n  role: Role;\n}\n\nexport interface LoginRequest {\n  email: string;\n  password: string;\n}\n\nexport interface AuthResponse {\n  token: string;\n  id: number;\n  email: string;\n  firstName: string;\n  lastName: string;\n  role: Role;\n}\n"],
  "mappings": ";;;;;;;;;;;;AASM,IAAO,cAAP,MAAO,aAAW;EAKtB,YACU,MACA,QAAc;AADd,SAAA,OAAA;AACA,SAAA,SAAA;AANF,SAAA,SAAS;AACT,SAAA,qBAAqB,IAAI,gBAAqC,IAAI;AACnE,SAAA,eAAe,KAAK,mBAAmB,aAAY;AAOxD,UAAM,aAAa,aAAa,QAAQ,aAAa;AACrD,QAAI,YAAY;AACd,WAAK,mBAAmB,KAAK,KAAK,MAAM,UAAU,CAAC;;EAEvD;EAEA,SAAS,SAAwB;AAC/B,WAAO,KAAK,KAAK,KAAmB,GAAG,KAAK,MAAM,aAAa,OAAO,EACnE,KACC,IAAI,cAAW;AACb,WAAK,eAAe,QAAQ;IAC9B,CAAC,CAAC;EAER;EAEA,MAAM,SAAqB;AACzB,WAAO,KAAK,KAAK,KAAmB,GAAG,KAAK,MAAM,UAAU,OAAO,EAChE,KACC,IAAI,cAAW;AACb,WAAK,eAAe,QAAQ;IAC9B,CAAC,CAAC;EAER;EAEA,SAAM;AACJ,iBAAa,WAAW,aAAa;AACrC,iBAAa,WAAW,OAAO;AAC/B,SAAK,mBAAmB,KAAK,IAAI;AACjC,SAAK,OAAO,SAAS,CAAC,QAAQ,CAAC;EACjC;EAEQ,eAAe,MAAkB;AACvC,iBAAa,QAAQ,eAAe,KAAK,UAAU,IAAI,CAAC;AACxD,iBAAa,QAAQ,SAAS,KAAK,KAAK;AACxC,SAAK,mBAAmB,KAAK,IAAI;EACnC;EAEA,iBAAc;AACZ,WAAO,KAAK,mBAAmB;EACjC;EAEA,WAAQ;AACN,WAAO,aAAa,QAAQ,OAAO;EACrC;EAEA,kBAAe;AACb,WAAO,CAAC,CAAC,KAAK,SAAQ;EACxB;EAEA,QAAQ,MAAY;AAClB,UAAM,OAAO,KAAK,eAAc;AAChC,WAAO,MAAM,SAAS;EACxB;EAEA,QAAK;AACH,WAAO,KAAK,KAAK,IAAU,GAAG,KAAK,MAAM,KAAK;EAChD;;;uBAlEW,cAAW,mBAAA,UAAA,GAAA,mBAAA,MAAA,CAAA;IAAA;EAAA;;4EAAX,cAAW,SAAX,aAAW,WAAA,YAFV,OAAM,CAAA;EAAA;;;;ACPpB,IAAY;CAAZ,SAAYA,OAAI;AACd,EAAAA,MAAA,WAAA,IAAA;AACA,EAAAA,MAAA,WAAA,IAAA;AACA,EAAAA,MAAA,QAAA,IAAA;AACA,EAAAA,MAAA,OAAA,IAAA;AACF,GALY,SAAA,OAAI,CAAA,EAAA;",
  "names": ["Role"]
}
