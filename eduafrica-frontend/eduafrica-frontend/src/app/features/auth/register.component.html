<div class="register-page">
  <div class="register-container">
    <div class="register-card">
      <div class="register-header">
        <h1>Créer un compte</h1>
        <p>Rejoignez EduAfrica</p>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="alert alert-error" *ngIf="errorMessage">{{ errorMessage }}</div>

        <div class="form-row">
          <div class="form-group">
            <label>Prénom *</label>
            <input type="text" formControlName="firstName" class="form-control" [class.error]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
            <small class="error-text" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">Le prénom est obligatoire</small>
          </div>
          <div class="form-group">
            <label>Nom *</label>
            <input type="text" formControlName="lastName" class="form-control" [class.error]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
            <small class="error-text" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">Le nom est obligatoire</small>
          </div>
        </div>

        <div class="form-group">
          <label>Email *</label>
          <input type="email" formControlName="email" class="form-control" [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          <small class="error-text" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
            <span *ngIf="registerForm.get('email')?.errors?.['required']">L'email est obligatoire</span>
            <span *ngIf="registerForm.get('email')?.errors?.['email']">L'email est invalide</span>
          </small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Téléphone *</label>
            <input type="tel" formControlName="phone" class="form-control" [class.error]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
            <small class="error-text" *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">Le téléphone est obligatoire</small>
          </div>
          <div class="form-group">
            <label>Pays *</label>
            <select formControlName="country" class="form-control" [class.error]="registerForm.get('country')?.invalid && registerForm.get('country')?.touched">
              <option value="">Sélectionnez</option>
              <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
            </select>
            <small class="error-text" *ngIf="registerForm.get('country')?.invalid && registerForm.get('country')?.touched">Le pays est obligatoire</small>
          </div>
        </div>

        <div class="form-group">
          <label>Je suis *</label>
          <select formControlName="role" class="form-control">
            <option *ngFor="let role of roles" [value]="role.value">{{ role.label }}</option>
          </select>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Mot de passe *</label>
            <input type="password" formControlName="password" class="form-control" [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            <small class="error-text" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
              <span *ngIf="registerForm.get('password')?.errors?.['required']">Le mot de passe est obligatoire</span>
              <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Le mot de passe doit contenir au moins 6 caractères</span>
            </small>
          </div>
          <div class="form-group">
            <label>Confirmer *</label>
            <input type="password" formControlName="confirmPassword" class="form-control" [class.error]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
            <small class="error-text" *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">La confirmation est obligatoire</small>
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="acceptTerms">
            <span>J'accepte les conditions</span>
          </label>
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="isLoading || registerForm.invalid">
          <span *ngIf="!isLoading">Créer mon compte</span>
          <span *ngIf="isLoading">Inscription...</span>
        </button>

        <p class="login-link">
          Déjà un compte ? <a routerLink="/login">Se connecter</a>
        </p>
      </form>
    </div>
  </div>
</div>
