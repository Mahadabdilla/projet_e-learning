<div class="mentors-page">
  <!-- Sidebar avec filtres -->
  <aside class="sidebar">
    <div class="sidebar-section">
      <h3 class="sidebar-title">
        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
        </svg>
        Filtres intelligents
      </h3>
    </div>

    <div class="sidebar-section">
      <h3 class="sidebar-title">
        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Disponibilit√©
      </h3>
      <div class="categories-list">
        <button 
          class="category-item"
          [class.active]="selectedAvailability === 'all'"
          (click)="selectAvailability('all')">
          <span class="category-label">Tous les mentors</span>
          <span class="category-count">{{ allMentorsCount }}</span>
        </button>
        <button 
          class="category-item"
          [class.active]="selectedAvailability === 'available'"
          (click)="selectAvailability('available')">
          <span class="category-label">Disponibles</span>
          <span class="category-count">{{ availableMentorsCount }}</span>
        </button>
        <button 
          class="category-item"
          [class.active]="selectedAvailability === 'unavailable'"
          (click)="selectAvailability('unavailable')">
          <span class="category-label">Indisponibles</span>
          <span class="category-count">{{ unavailableMentorsCount }}</span>
        </button>
      </div>
    </div>

    <div class="sidebar-section">
      <h3 class="sidebar-title">
        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
        </svg>
        Sp√©cialit√©s
      </h3>
      <div class="categories-list">
        <button 
          *ngFor="let specialty of specialties"
          class="category-item"
          [class.active]="selectedSpecialty === specialty.value"
          (click)="selectSpecialty(specialty.value)">
          <span class="category-label">{{ specialty.label }}</span>
          <span class="category-count">{{ specialty.count }}</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- Contenu principal -->
  <main class="main-content">
    <!-- Header avec titre et tri -->
    <div class="content-header">
      <div class="header-left">
        <h1 class="page-title">
          <span class="title-highlight">{{ filteredMentors.length }}</span>
          <span class="title-text">mentors disponibles</span>
        </h1>
        <p class="page-subtitle">Trouvez le mentor parfait pour vous accompagner</p>
      </div>
      <div class="header-right">
        <label class="sort-label">
          <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
          </svg>
          Trier par:
        </label>
        <select class="sort-select" [(ngModel)]="sortBy" (change)="onSortChange()">
          <option value="rating">Note</option>
          <option value="sessions">Nombre de sessions</option>
          <option value="price-asc">Tarif croissant</option>
          <option value="price-desc">Tarif d√©croissant</option>
          <option value="name">Nom (A-Z)</option>
        </select>
      </div>
    </div>

    <!-- Barre de recherche -->
    <div class="search-bar">
      <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
      <input
        type="text"
        [(ngModel)]="searchKeyword"
        (input)="onSearch()"
        placeholder="Rechercher par sp√©cialit√© ou bio..."
        class="search-input"
      />
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p>Chargement des mentors...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="!loading && error" class="error-state">
      <div class="error-icon">‚ö†Ô∏è</div>
      <h3>Erreur de chargement</h3>
      <p>{{ error }}</p>
      <button (click)="loadMentors()" class="retry-button">R√©essayer</button>
    </div>

    <!-- Liste des mentors -->
    <div *ngIf="!loading && filteredMentors.length > 0" class="mentors-grid">
      <div *ngFor="let mentor of filteredMentors" class="mentor-card">
        <!-- Image/Avatar -->
        <div class="card-image">
          <div class="avatar-placeholder">
            <span class="avatar-initials">{{ mentor.user?.firstName?.charAt(0) }}{{ mentor.user?.lastName?.charAt(0) }}</span>
          </div>
          
          <!-- Badges -->
          <div class="card-badges">
            <span *ngIf="mentor.isAvailable" class="badge badge-available">
              <svg class="badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Disponible
            </span>
            <span *ngIf="!mentor.isAvailable" class="badge badge-unavailable">
              <svg class="badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Indisponible
            </span>
          </div>
        </div>

        <!-- Contenu de la carte -->
        <div class="card-body">
          <!-- Sp√©cialit√© et Note -->
          <div class="card-top">
            <span class="specialty-badge">{{ mentor.specialty }}</span>
            <div class="rating">
              <svg class="star-icon" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
              </svg>
              <span class="rating-value">{{ mentor.rating.toFixed(1) }}</span>
            </div>
          </div>

          <!-- Nom -->
          <h2 class="card-title">{{ mentor.user?.firstName }} {{ mentor.user?.lastName }}</h2>

          <!-- Bio -->
          <p class="card-description">{{ mentor.bio }}</p>

          <!-- Localisation et Sessions -->
          <div class="mentor-info-box">
            <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            <span class="info-name">{{ mentor.user?.country }}</span>
            <span class="sessions">
              <svg class="sessions-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
              </svg>
              {{ mentor.nbSessions }} sessions
            </span>
          </div>

          <!-- Stats -->
          <div class="card-stats">
            <span class="stat-item">
              <svg class="stat-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              {{ mentor.hourlyRate | number }} FCFA/h
            </span>
          </div>

          <!-- Actions -->
          <div class="card-footer">
            <button class="btn-contact">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
              </svg>
              Contacter
            </button>
            <button 
              *ngIf="mentor.isAvailable" 
              class="btn-book"
              (click)="handleRequestMentor(mentor)">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              Demander ce mentor
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && filteredMentors.length === 0" class="empty-state">
      <div class="empty-icon">üë•</div>
      <h3>Aucun mentor trouv√©</h3>
      <p>Essayez de changer les filtres ou les crit√®res de recherche</p>
    </div>

    <!-- Pagination -->
    <div *ngIf="!loading && totalPages > 1" class="pagination">
      <button 
        *ngFor="let page of getPageNumbers()" 
        (click)="goToPage(page)"
        [class.active]="currentPage === page"
        class="page-btn">
        {{ page + 1 }}
      </button>
    </div>
  </main>
</div>

<!-- Request Mentor Modal -->
<app-request-mentor 
  *ngIf="showRequestModal && selectedMentor"
  [mentor]="selectedMentor"
  (requestCreated)="onRequestCreated()"
  (cancelled)="onRequestCancelled()">
</app-request-mentor>

