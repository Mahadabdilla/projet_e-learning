<div class="file-upload-container">
  <!-- Zone de drop -->
  <div
    class="upload-zone"
    [class.dragging]="isDragging"
    [class.uploading]="isUploading"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)">
    
    <input
      type="file"
      [id]="'file-input-' + fileType"
      [accept]="accept"
      [multiple]="multiple"
      (change)="onFileSelected($event)"
      class="file-input"
      [disabled]="isUploading">
    
    <label [for]="'file-input-' + fileType" class="upload-label">
      <div class="upload-content">
        <div class="upload-icon">ğŸ“¤</div>
        <p class="upload-text">
          <span *ngIf="!isUploading">Glissez-dÃ©posez des fichiers ici ou cliquez pour sÃ©lectionner</span>
          <span *ngIf="isUploading">Upload en cours...</span>
        </p>
        <p class="upload-hint" *ngIf="accept">
          Types acceptÃ©s : {{ accept }}
        </p>
        <p class="upload-hint">
          Taille maximale : {{ maxSizeMB }} MB
        </p>
      </div>
    </label>
  </div>

  <!-- Fichiers sÃ©lectionnÃ©s (en attente d'upload) -->
  <div *ngIf="selectedFiles.length > 0" class="selected-files">
    <h4 class="section-title">Fichiers sÃ©lectionnÃ©s</h4>
    <div class="file-list">
      <div *ngFor="let file of selectedFiles" class="file-item">
        <span class="file-icon">{{ getFileIcon(file) }}</span>
        <div class="file-info">
          <p class="file-name">{{ file.name }}</p>
          <p class="file-size">{{ formatFileSize(file.size) }}</p>
        </div>
        <button
          *ngIf="!isUploading"
          (click)="removeFile(file)"
          class="remove-btn"
          type="button">
          Ã—
        </button>
        <div *ngIf="isUploading && uploadProgress[file.name]" class="progress-bar">
          <div class="progress-fill" [style.width.%]="uploadProgress[file.name]"></div>
        </div>
      </div>
    </div>
    <button
      *ngIf="!isUploading"
      (click)="uploadFiles()"
      class="upload-btn"
      type="button">
      Uploader les fichiers
    </button>
  </div>

  <!-- Fichiers uploadÃ©s -->
  <div *ngIf="uploadedFiles.length > 0" class="uploaded-files">
    <h4 class="section-title">Fichiers uploadÃ©s</h4>
    <div class="file-list">
      <div *ngFor="let fileUpload of uploadedFiles" class="file-item uploaded">
        <span class="file-icon">
          <span *ngIf="fileUpload.fileType === 'IMAGE'">ğŸ–¼ï¸</span>
          <span *ngIf="fileUpload.fileType === 'VIDEO'">ğŸ¥</span>
          <span *ngIf="fileUpload.fileType === 'DOCUMENT'">ğŸ“„</span>
          <span *ngIf="fileUpload.fileType !== 'IMAGE' && fileUpload.fileType !== 'VIDEO' && fileUpload.fileType !== 'DOCUMENT'">ğŸ“</span>
        </span>
        <div class="file-info">
          <p class="file-name">{{ fileUpload.originalFileName }}</p>
          <p class="file-size">{{ formatFileSize(fileUpload.fileSize) }}</p>
        </div>
        <div class="file-actions">
          <a
            [href]="getFileUrl(fileUpload.id)"
            target="_blank"
            class="view-btn"
            *ngIf="fileUpload.fileType === 'IMAGE'">
            ğŸ‘ï¸ Voir
          </a>
          <button
            (click)="removeUploadedFile(fileUpload)"
            class="remove-btn"
            type="button">
            ğŸ—‘ï¸
          </button>
        </div>
      </div>
    </div>
  </div>
</div>



